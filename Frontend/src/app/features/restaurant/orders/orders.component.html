<div class="orders-container">
  <h2>Incoming Orders</h2>

  <div *ngIf="loading" class="loading">
    Loading orders...
  </div>

  <div *ngIf="!loading && orders.length === 0" class="empty-state">
    <p>No orders available at the moment.</p>
  </div>

  <div *ngIf="!loading && orders.length > 0" class="orders-grid">
    <div *ngFor="let order of orders" class="order-card">

      <div class="order-header">
        <h3>Order #{{ order.id }}</h3>
        <span class="status" [ngClass]="order.status">
          {{ order.status === 'OUT_FOR_DELIVERY' ? 'Out for Delivery' : order.status }}
        </span>
      </div>

      <div class="order-body">
        <div class="order-info">
          <p><strong>Customer:</strong> <span>{{ order.customer?.name || 'N/A' }}</span></p>
          <p><strong>Phone:</strong> <span>{{ order.cell || order.customer?.cell || 'N/A' }}</span></p>
          <p><strong>Address:</strong> <span>{{ order.deliveryAddress || order.address || 'N/A' }}</span></p>
          <p><strong>Total:</strong> <span>â‚¹{{ order.totalPrice }}</span></p>
        </div>

        <h4>Items</h4>
        <ul>
          <li *ngFor="let item of order.items">
            <span>{{ item.menuItem?.name || item.name }}</span>
            <span>Ã—{{ item.quantity }} Â· â‚¹{{ (item.price * item.quantity) }}</span>
          </li>
        </ul>

        <div class="review-section" *ngIf="order.rating">
          <h4>Customer Review</h4>
          <p class="rating">{{ 'â˜…'.repeat(order.rating) }} <span style="color:#6b7280; font-size: 0.8em; font-weight: normal;">({{order.rating}}/5)</span></p>
          <p class="comment" *ngIf="order.reviewComment">"{{ order.reviewComment }}"</p>
        </div>
      </div>

      <div class="actions">
        <button *ngIf="order.status === 'PLACED'" (click)="updateStatus(order.id, 'ACCEPTED')">âœ“ Accept Order</button>

        <button *ngIf="order.status === 'PLACED'" class="reject" (click)="updateStatus(order.id, 'REJECTED')">âœ—
          Reject Order</button>

        <button *ngIf="order.status === 'ACCEPTED'" (click)="updateStatus(order.id, 'PREPARING')">ğŸ‘¨â€ğŸ³ Mark
          Preparing</button>

        <button *ngIf="order.status === 'PREPARING'" (click)="updateStatus(order.id, 'READY')">âœ“ Mark Ready</button>

        <button *ngIf="order.status === 'READY'" (click)="updateStatus(order.id, 'OUT_FOR_DELIVERY')">ğŸšš Out for
          Delivery</button>

        <button *ngIf="order.status === 'OUT_FOR_DELIVERY'" (click)="updateStatus(order.id, 'DELIVERED')">âœ… Mark
          Delivered</button>
      </div>

    </div>
  </div>
</div>