<div class="auth-container">
  <h2>Create Account</h2>

  <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
  <p class="success" *ngIf="successMsg">{{ successMsg }}</p>

  <form (submit)="onRegister(); $event.preventDefault()" *ngIf="step === 1">

    <label>Name</label>
    <input type="text" [value]="name" (input)="name = $any($event.target).value" required>

    <label>Email</label>
    <input type="email" [value]="email" (input)="email = $any($event.target).value" required>

    <label>Phone</label>
    <input type="text" [value]="phone" (input)="phone = $any($event.target).value" required>

    <label>Password</label>
    <div class="password-wrapper">
      <input [type]="showPassword ? 'text' : 'password'" [value]="password"
        (input)="password = $any($event.target).value" required>
      <button type="button" class="toggle-password-btn" (click)="showPassword = !showPassword">
        <!-- Closed Lock (Hidden) -->
        <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
        <!-- Open Lock (Visible) -->
        <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
        </svg>
      </button>
    </div>

    <label>Confirm Password</label>
    <div class="password-wrapper">
      <input [type]="showConfirmPassword ? 'text' : 'password'" [value]="confirmPassword"
        (input)="confirmPassword = $any($event.target).value" required>
      <button type="button" class="toggle-password-btn" (click)="showConfirmPassword = !showConfirmPassword">
        <!-- Closed Lock (Hidden) -->
        <svg *ngIf="!showConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
        <!-- Open Lock (Visible) -->
        <svg *ngIf="showConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
        </svg>
      </button>
    </div>

    <label>Role</label>
    <select [value]="role" (change)="role = $any($event.target).value">
      <option value="CUSTOMER">Customer</option>
      <option value="RESTAURANT_OWNER">Restaurant Owner</option>
    </select>

    <button type="submit">Register</button>

    <p>
      Already have an account?
      <a routerLink="/login">Login</a>
    </p>
  </form>

  <form (submit)="onVerifyOtp(); $event.preventDefault()" *ngIf="step === 2">
    <p style="text-align: center; color: #555;">Enter the 6-digit OTP sent to {{ email }}</p>

    <label>OTP</label>
    <input type="text" [value]="otp" (input)="allowOnlyNumbers($event)" placeholder="123456" required maxlength="6"
      style="text-align: center; letter-spacing: 5px; font-size: 1.2em;">

    <button type="submit">Verify OTP</button>

    <button type="button" (click)="onResendOtp()"
      style="background: transparent; color: #ff5722; margin-top: 10px; border: 1px solid #ff5722;">Resend OTP</button>

    <p>
      <a (click)="step = 1" style="cursor: pointer; color: #888;">Back to Registration</a>
    </p>
  </form>
</div>